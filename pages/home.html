<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CodeQuest</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/home.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
  </head>
  <body>
        <header class="site_header">
           <div class="container_header">
              <div class="logo_header">
                    <img onclick="location.href='/home'" src="../assets/image/logo.png" alt="Logo" class="logo-animate" />
                    <a href="/home" class="">CodeQuest</a>
              </div>
              <nav class="nav_header">
                <button class="nav_btn" onclick="location.href='/home'">Trang Ch·ªß</button>
                <button id="about-btn" class="nav_btn" onclick="location.href='/about'">Gi·ªõi Thi·ªáu</button>
                <button class="nav_btn" onclick="location.href='/features'">ƒê·∫∑c Tr∆∞ng</button>
                <button class="nav_btn" onclick="location.href='/contact'">Li√™n H·ªá</button>
              </nav>
              
              <!-- Auth section v·ªõi dropdown menu -->
              <div class="auth_header">
                <button class="login_btn" onclick="handleAuthRedirect('login')">ƒêƒÉng Nh·∫≠p</button>
                <button class="register_btn" onclick="handleAuthRedirect('register')">ƒêƒÉng K√Ω</button>
              </div>
              
              <!-- User dropdown menu (·∫©n ban ƒë·∫ßu) -->
              <div class="user_menu" id="user_menu" style="display: none;">
                <div class="user_info_header">
                  <div class="user_avatar_small" id="user_avatar_small">U</div>
                  <div class="user_details">
                    <span class="user_name" id="user_name_header">User</span>
                    <span class="user_role">CodeQuest Member</span>
                  </div>
                  <button class="dropdown_toggle" id="dropdown_toggle">
                    <i class="fas fa-chevron-down"></i>
                  </button>
                </div>
                
                <div class="dropdown_menu" id="dropdown_menu">
                  <a href="/dashboard" class="dropdown_item">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                  </a>
                  <a href="/profile" class="dropdown_item">
                    <i class="fas fa-user-edit"></i>
                    <span>C·∫≠p nh·∫≠t th√¥ng tin</span>
                  </a>
                  <button class="dropdown_item logout_btn" id="logout_btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>ƒêƒÉng xu·∫•t</span>
                  </button>
                </div>
              </div>
           </div> 
        </header>

        <!-- Main -->
         <main class="site_main">
          <!-- hero_section -->
            <section class="hero_section">
              <div class="hero_section_text">
                <h1>H·ªçc c√πng CodeQuest v·ª´a ch∆°i v·ª´a gi·ªèi code</h1>
                <p>CodeQuest l√† tr·∫£i nghi·ªám h·ªçc l·∫≠p tr√¨nh ƒë·ªôc ƒë√°o gi√∫p b·∫°n ti·∫øp c·∫≠n l·∫≠p tr√¨nh m·ªôt c√°ch hi·ªáu qu·∫£. H·ªçc th√¥ng qua c√°c th·ª≠ th√°ch b·∫±ng AI v√† nh·∫≠n ƒë√°nh gi√°, nh·∫≠n ƒëi·ªÉm th√¥ng minh v√† ƒë∆∞·ª£c khuy·∫øn kh√≠ch ho√†n th√†nh.</p>
                <button class="cta_btn" onclick="handleTryNow()">Th·ª≠ Ngay CodeQuest</button>
              </div>
              <img src="../assets/image/hero_section.gif" alt="Hero Section" class="hero_section_img">
            </section>

            <!-- Features Section -->
            <div class="title_features">
              <h1>ƒê·∫∂C ƒêI·ªÇM N·ªîI B·∫¨T</h1>
            </div>
            <section class="features_section">
              <div class="features_container">
                <div class="features_title">
                  <h2>T·∫°i sao ch·ªçn CodeQuest?</h2>
                  <p>Kh√°m ph√° nh·ªØng ƒëi·ªÉm n·ªïi b·∫≠t gi√∫p vi·ªác h·ªçc l·∫≠p tr√¨nh tr·ªü n√™n th√∫ v·ªã v√† hi·ªáu qu·∫£ h∆°n bao gi·ªù h·∫øt</p>
                </div>

                <div class="features_gird">
                  <div class="features_box">
                    <span class="features_icon">üéÆ</span>
                    <h3>Game h√≥a vi·ªác h·ªçc</h3>
                    <p>Code ƒë·ªÉ v∆∞·ª£t th·ª≠ th√°ch. M·ªói b√†i t·∫≠p l√† m·ªôt level game th√∫ v·ªã, gi√∫p b·∫°n h·ªçc m√† kh√¥ng c·∫£m th·∫•y nh√†m ch√°n.</p>
                  </div>

                  <div class="features_box">
                    <span class="features_icon">‚ö°</span>
                    <h3>H·ªçc nhanh h∆°n</h3>
                    <p>V·ª´a ch∆°i v·ª´a luy·ªán code. Ph∆∞∆°ng ph√°p h·ªçc t·∫≠p t∆∞∆°ng t√°c gi√∫p b·∫°n ti·∫øp thu ki·∫øn th·ª©c nhanh ch√≥ng v√† hi·ªáu qu·∫£.</p>
                  </div>

                  <div class="features_box">
                    <span class="features_icon">üåç</span>
                    <h3>C·ªông ƒë·ªìng h·ªçc c√πng nhau</h3>
                    <p>B·∫£ng x·∫øp h·∫°ng, thi ƒë·∫•u v√† h·ªçc h·ªèi l·∫´n nhau. Tham gia c·ªông ƒë·ªìng ƒë·ªÉ c√πng ph√°t tri·ªÉn</p>
                  </div>
                </div>
              </div>
            </section>

            <!-- Testimonials Section -->
            <section class="testimonials_section">
              <div class="testimonials_container">
                <h2 class="testimonials_title">ƒê∆∞·ª£c Tin T∆∞·ªüng B·ªüi C·ªông ƒê·ªìng</h2>
                <p class="testimonials_subtitle">H√†ng b·∫°n m·ªõi h·ªçc l·∫≠p tr√¨nh ƒë√£ ch·ªçn</p>

                <div class="marquee_row">
                  <div class="marquee_track">
                    <div class="testimonial_card">
                      <div class="testimonial_header">
                        <img src="https://i.pravatar.cc/50?img=3" alt="avatar" class="avatar">
                        <div>
                          <h4 class="name">Zeke Sikelianos</h4>
                          <p class="role">Replicate</p>
                        </div>
                      </div>
                      <p class="testimonial_text">‚ÄúCodeQuest bi·∫øn vi·ªác h·ªçc code th√†nh tr√≤ ch∆°i. T√¥i h·ªçc Python nhanh h∆°n h·∫≥n.‚Äù</p>
                    </div>

                    <div class="testimonial_card">
                      <div class="testimonial_header">
                        <img src="https://i.pravatar.cc/50?img=5" alt="avatar" class="avatar">
                        <div>
                          <h4 class="name">shadcn</h4>
                          <p class="role">Vercel</p>
                        </div>
                      </div>
                      <p class="testimonial_text">‚ÄúTr·∫£i nghi·ªám m∆∞·ª£t: v·ª´a ch∆°i v·ª´a h·ªçc, c·∫£m gi√°c nh∆∞ c√≥ AI k√®m 1-1.‚Äù</p>
                    </div>

                    <div class="testimonial_card">
                      <div class="testimonial_header">
                        <img src="https://i.pravatar.cc/50?img=7" alt="avatar" class="avatar">
                        <div>
                          <h4 class="name">Sawyer Hood</h4>
                          <p class="role">Figma</p>
                        </div>
                      </div>
                      <p class="testimonial_text">‚ÄúC√¥ng c·ª• h·ªçc code hay nh·∫•t t√¥i t·ª´ng d√πng. M·ªói tu·∫ßn c√≥ th√™m t√≠nh nƒÉng m·ªõi.‚Äù</p>
                    </div>

                    <div class="testimonial_card">
                      <div class="testimonial_header">
                        <img src="https://i.pravatar.cc/50?img=12" alt="avatar" class="avatar">
                        <div>
                          <h4 class="name">Lan Ph·∫°m</h4>
                          <p class="role">Frontend Dev</p>
                        </div>
                      </div>
                      <p class="testimonial_text">‚ÄúB√†i t·∫≠p d·∫°ng challenge r·∫•t cu·ªën. M√¨nh l√™n tr√¨nh React th·∫•y r√µ.‚Äù</p>
                    </div>

                    <!-- B·∫£n sao ƒë·ªÉ cu·ªôn v√¥ h·∫°n -->
                    <div class="testimonial_card">
                      <div class="testimonial_header">
                        <img src="https://i.pravatar.cc/50?img=3" alt="avatar" class="avatar">
                        <div>
                          <h4 class="name">Zeke Sikelianos</h4>
                          <p class="role">Replicate</p>
                        </div>
                      </div>
                      <p class="testimonial_text">‚ÄúCodeQuest bi·∫øn vi·ªác h·ªçc code th√†nh tr√≤ ch∆°i. T√¥i h·ªçc Python nhanh h∆°n h·∫≥n.‚Äù</p>
                    </div>

                    <div class="testimonial_card">
                      <div class="testimonial_header">
                        <img src="https://i.pravatar.cc/50?img=5" alt="avatar" class="avatar">
                        <div>
                          <h4 class="name">shadcn</h4>
                          <p class="role">Vercel</p>
                        </div>
                      </div>
                      <p class="testimonial_text">‚ÄúTr·∫£i nghi·ªám m∆∞·ª£t: v·ª´a ch∆°i v·ª´a h·ªçc, c·∫£m gi√°c nh∆∞ c√≥ AI k√®m 1-1.‚Äù</p>
                    </div>
                  </div>
                </div>

                <!-- H√†ng 2 ch·∫°y ph·∫£i -> tr√°i -->
                <div class="marquee_row reverse">
                  <div class="marquee_track">
                    <div class="testimonial_card">
                      <div class="testimonial_header">
                        <img src="https://i.pravatar.cc/50?img=9" alt="avatar" class="avatar">
                        <div>
                          <h4 class="name">Minh ƒê·ª©c</h4>
                          <p class="role">Backend Engineer</p>
                        </div>
                      </div>
                      <p class="testimonial_text">‚ÄúCh·∫•m ƒëi·ªÉm th√¥ng minh, bi·∫øt m√¨nh sai ·ªü ƒë√¢u v√† g·ª£i √Ω ch·ªânh r·∫•t r√µ.‚Äù</p>
                    </div>

                    <div class="testimonial_card">
                      <div class="testimonial_header">
                        <img src="https://i.pravatar.cc/50?img=14" alt="avatar" class="avatar">
                        <div>
                          <h4 class="name">An Nguy·ªÖn</h4>
                          <p class="role">Student</p>
                        </div>
                      </div>
                      <p class="testimonial_text">‚ÄúUI ƒë·∫πp, tr·∫£i nghi·ªám gamification t·∫°o ƒë·ªông l·ª±c h·ªçc m·ªói ng√†y.‚Äù</p>
                    </div>

                    <div class="testimonial_card">
                      <div class="testimonial_header">
                        <img src="https://i.pravatar.cc/50?img=11" alt="avatar" class="avatar">
                        <div>
                          <h4 class="name">Qu·ªëc B·∫£o</h4>
                          <p class="role">Mobile Dev</p>
                        </div>
                      </div>
                      <p class="testimonial_text">‚ÄúN·ªôi dung c·∫≠p nh·∫≠t li√™n t·ª•c, c√≥ c·∫£ th·ª≠ th√°ch Flutter r·∫•t ch·∫•t.‚Äù</p>
                    </div>

                    <!-- B·∫£n sao ƒë·ªÉ cu·ªôn v√¥ h·∫°n -->
                    <div class="testimonial_card">
                      <div class="testimonial_header">
                        <img src="https://i.pravatar.cc/50?img=9" alt="avatar" class="avatar">
                        <div>
                          <h4 class="name">Minh ƒê·ª©c</h4>
                          <p class="role">Backend Engineer</p>
                        </div>
                      </div>
                      <p class="testimonial_text">‚ÄúCh·∫•m ƒëi·ªÉm th√¥ng minh, bi·∫øt m√¨nh sai ·ªü ƒë√¢u v√† g·ª£i √Ω ch·ªânh r·∫•t r√µ.‚Äù</p>
                    </div>

                    <div class="testimonial_card">
                      <div class="testimonial_header">
                        <img src="https://i.pravatar.cc/50?img=14" alt="avatar" class="avatar">
                        <div>
                          <h4 class="name">An Nguy·ªÖn</h4>
                          <p class="role">Student</p>
                        </div>
                      </div>
                      <p class="testimonial_text">‚ÄúUI ƒë·∫πp, tr·∫£i nghi·ªám gamification t·∫°o ƒë·ªông l·ª±c h·ªçc m·ªói ng√†y.‚Äù</p>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <!-- Technologies Section -->
            <section class="technologies_section">
              <div class="technologies_container">
                <div class="technologies_title">
                  <h2>Ng√¥n Ng·ªØ L·∫≠p Tr√¨nh ƒê∆∞·ª£c H·ªó Tr·ª£</h2>
                  <p>CodeQuest h·ªó tr·ª£ ƒëa d·∫°ng c√°c ng√¥n ng·ªØ l·∫≠p tr√¨nh ph·ªï bi·∫øn, gi√∫p b·∫°n h·ªçc v√† th·ª±c h√†nh theo s·ªü th√≠ch</p>
                </div>

                <div class="tech_grid">
                  <div class="tech_item">
                    <div class="tech_icon">üêç</div>
                    <h3>Python</h3>
                    <p>Python l√† m·ªôt ng√¥n ng·ªØ l·∫≠p tr√¨nh m·∫°nh m·∫Ω v√† linh ho·∫°t, ph√π h·ª£p cho nhi·ªÅu lo·∫°i d·ª± √°n kh√°c nhau.</p>
                  </div>

                  <div class="tech_item">
                    <span class="tech_icon">‚òï</span>
                    <h3>Java</h3>
                    <p>Ng√¥n ng·ªØ h∆∞·ªõng ƒë·ªëi t∆∞·ª£ng m·∫°nh m·∫Ω cho ·ª©ng d·ª•ng doanh nghi·ªáp</p>
                  </div>
                  
                  <div class="tech_item">
                    <span class="tech_icon">‚ö°</span>
                    <h3>JavaScript</h3>
                    <p>Ng√¥n ng·ªØ web ph·ªï bi·∫øn cho frontend v√† backend</p>
                  </div>
                  
                  <div class="tech_item">
                    <span class="tech_icon">üî∑</span>
                    <h3>C++</h3>
                    <p>Ng√¥n ng·ªØ hi·ªáu su·∫•t cao cho l·∫≠p tr√¨nh h·ªá th·ªëng</p>
                  </div>
                  
                  <div class="tech_item">
                    <span class="tech_icon">ü¶Ä</span>
                    <h3>Rust</h3>
                    <p>Ng√¥n ng·ªØ hi·ªán ƒë·∫°i v·ªõi hi·ªáu su·∫•t v√† b·∫£o m·∫≠t cao</p>
                  </div>
                </div>
              </div>
            </section>

            <!-- CTA Section -->
            <section class="cta_section">
              <div class="cta_container">
                <h2 class="cta_title">S·∫µn s√†ng b·∫Øt ƒë·∫ßu h√†nh tr√¨nh?</h2>
                <p class="cta_description">
                  Tham gia CodeQuest ngay h√¥m nay v√† tr·∫£i nghi·ªám ph∆∞∆°ng ph√°p h·ªçc l·∫≠p tr√¨nh hi·ªán ƒë·∫°i nh·∫•t. 
                  Mi·ªÖn ph√≠ ho√†n to√†n cho ng∆∞·ªùi m·ªõi b·∫Øt ƒë·∫ßu!
                </p>
                <div class="cta_buttons">
                  <button class="cta_primary" onclick="handleTryNow()">B·∫Øt ƒë·∫ßu mi·ªÖn ph√≠</button>
                </div>
              </div>
            </section>
          </main>

          <!-- Footer Section -->
          <footer class="site-footer">
            <div class="footer-container">
              <!-- Th√¥ng tin li√™n h·ªá -->
              <div class="footer-contact">
                <p><strong>CodeQuest</strong></p>
                <p>Email: support@codequest.com</p>
                <p>Hotline: +84 123 456 789</p>
                <div class="footer-socials">
                  <a href="#"><i class="fab fa-facebook" style="font-size: 20px; color: #4267B2;"></i></a>
                  <a href="#"><i class="fab fa-github" style="font-size: 20px; color: #333;"></i></a>
                  <a href="#"><i class="fab fa-twitter" style="font-size: 20px; color: #1DA1F2;"></i></a>
                </div>
              </div>

              <!-- Li√™n k·∫øt nhanh -->
              <div class="footer-links">
                <div class="footer-column">
                  <h4>S·∫£n ph·∫©m</h4>
                <ul>
                    <li><a href="/home">Trang Ch·ªß</a></li>
                    <li><a href="/about">Gi·ªõi Thi·ªáu</a></li>
                    <li><a href="/features">ƒê·∫∑c Tr∆∞ng</a></li>
                    <li><a href="/contact">Li√™n H·ªá</a></li>
                </ul>
                </div>
                
                <div class="footer-column">
                  <h4>C√¥ng ty</h4>
                <ul>
                    <li><a href="/about">V·ªÅ ch√∫ng t√¥i</a></li>
                    <li><a href="/careers">C∆° h·ªôi ngh·ªÅ nghi·ªáp</a></li>
                    <li><a href="/clients">Kh√°ch h√†ng</a></li>
                </ul>
                </div>
                <div class="footer-column">
                  <h4>Ph√°p l√Ω</h4>
                <ul>
                    <li><a href="/legal">Ph√°p l√Ω</a></li>
                </ul>
                </div>
              </div>


            </div>
          </footer>
            
    </div>

    <script>
      // Check login status and redirect accordingly
      async function handleTryNow() {
        try {
          const response = await fetch("/api/auth/check-session");
          const data = await response.json();

          if (data.success && data.authenticated) {
            // ƒê√£ ƒëƒÉng nh·∫≠p, chuy·ªÉn th·∫≥ng ƒë·∫øn dashboard
            window.location.href = "/dashboard";
          } else {
            // Ch∆∞a ƒëƒÉng nh·∫≠p, chuy·ªÉn ƒë·∫øn trang auth v·ªõi tab register
            window.location.href = "/auth?tab=register";
          }
        } catch (error) {
          console.error("Error checking session:", error);
          // N·∫øu c√≥ l·ªói, m·∫∑c ƒë·ªãnh chuy·ªÉn ƒë·∫øn auth
          window.location.href = "/auth?tab=register";
        }
      }

      // X·ª≠ l√Ω chuy·ªÉn h∆∞·ªõng auth v·ªõi ki·ªÉm tra session
      async function handleAuthRedirect(tab) {
        try {
          const response = await fetch("/api/auth/check-session");
          const data = await response.json();

          if (data.success && data.authenticated) {
            // ƒê√£ ƒëƒÉng nh·∫≠p, chuy·ªÉn th·∫≥ng ƒë·∫øn dashboard
            window.location.href = "/dashboard";
          } else {
            // Ch∆∞a ƒëƒÉng nh·∫≠p, chuy·ªÉn ƒë·∫øn trang auth v·ªõi tab ƒë∆∞·ª£c ch·ªâ ƒë·ªãnh
            window.location.href = `/auth?tab=${tab}`;
          }
        } catch (error) {
          console.error("Error checking session:", error);
          // N·∫øu c√≥ l·ªói, m·∫∑c ƒë·ªãnh chuy·ªÉn ƒë·∫øn auth
          window.location.href = `/auth?tab=${tab}`;
        }
      }

      // Check authentication status and update header
      async function checkAuthAndUpdateHeader() {
        try {
          const response = await fetch('/api/auth/check-session');
          const data = await response.json();
          
          if (data.success && data.authenticated) {
            // User ƒë√£ ƒëƒÉng nh·∫≠p, hi·ªÉn th·ªã dropdown menu
            document.querySelector('.auth_header').style.display = 'none';
            document.getElementById('user_menu').style.display = 'flex';
            
            // C·∫≠p nh·∫≠t th√¥ng tin user
            document.getElementById('user_name_header').textContent = data.user.full_name || 'User';
            const avatar = document.getElementById('user_avatar_small');
            avatar.textContent = data.user.full_name ? data.user.full_name.charAt(0).toUpperCase() : 'U';
            
            setupDropdownEvents();
          } else {
            // User ch∆∞a ƒëƒÉng nh·∫≠p, hi·ªÉn th·ªã login/register buttons
            document.querySelector('.auth_header').style.display = 'flex';
            document.getElementById('user_menu').style.display = 'none';
          }
        } catch (error) {
          console.error('Error checking session:', error);
          // M·∫∑c ƒë·ªãnh hi·ªÉn th·ªã login/register
          document.querySelector('.auth_header').style.display = 'flex';
          document.getElementById('user_menu').style.display = 'none';
        }
      }







      // Set active navigation button
      function setActiveNavButton() {
        const currentPage = window.location.pathname;
        const navButtons = document.querySelectorAll('.nav_btn');
        
        navButtons.forEach(btn => {
          btn.classList.remove('active');
          
          // Check which page we're on and set active class
          if (currentPage.includes('/home') && btn.textContent.trim() === 'Trang Ch·ªß') {
            btn.classList.add('active');
          } else if (currentPage.includes('/about') && btn.textContent.trim() === 'Gi·ªõi Thi·ªáu') {
            btn.classList.add('active');
          } else if (currentPage.includes('/features') && btn.textContent.trim() === 'ƒê·∫∑c Tr∆∞ng') {
            btn.classList.add('active');
          } else if (currentPage.includes('/contact') && btn.textContent.trim() === 'Li√™n H·ªá') {
            btn.classList.add('active');
          }
        });
      }

      function setupDropdownEvents() {
        const dropdownToggle = document.getElementById('dropdown_toggle');
        const dropdownMenu = document.getElementById('dropdown_menu');
        const logoutBtn = document.getElementById('logout_btn');

        // Toggle dropdown
        dropdownToggle.addEventListener('click', function(e) {
          e.stopPropagation();
          dropdownMenu.classList.toggle('show');
          dropdownToggle.classList.toggle('active');
        });

        // ƒê√≥ng dropdown khi click ra ngo√†i
        document.addEventListener('click', function() {
          dropdownMenu.classList.remove('show');
          dropdownToggle.classList.remove('active');
        });

        // X·ª≠ l√Ω logout
        logoutBtn.addEventListener('click', async function() {
          try {
            const response = await fetch('/api/auth/logout', {
              method: 'POST'
            });
            
            if (response.ok) {
              window.location.href = '/home';
            }
          } catch (error) {
            console.error('Logout error:', error);
          }
        });
      }

      // Initialize page
      document.addEventListener('DOMContentLoaded', function() {
        checkAuthAndUpdateHeader();
        setActiveNavButton();
      });
    </script>
  </body>
</html>
