<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CodeQuest - ƒê·∫∑c Tr∆∞ng</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../assets/css/features.css" />
  </head>

  <body>
    <!-- Header gi·ªØ nguy√™n -->
    <header class="site_header">
      <div class="container_header">
        <div class="logo_header">
          <img
            onclick="location.href='/home'"
            src="../assets/image/logo.png"
            alt="Logo"
            class="logo-animate"
          />
          <a href="/home" class="">CodeQuest</a>
        </div>
        <nav class="nav_header">
          <button class="nav_btn" onclick="location.href='/home'">
            Trang Ch·ªß
          </button>
          <button
            id="about-btn"
            class="nav_btn"
            onclick="location.href='/about'"
          >
            Gi·ªõi Thi·ªáu
          </button>
          <button class="nav_btn" onclick="location.href='/features'">
            ƒê·∫∑c Tr∆∞ng
          </button>
          <button class="nav_btn" onclick="location.href='/contact'">
            Li√™n H·ªá
          </button>
        </nav>

        <!-- Auth section v·ªõi dropdown menu -->
        <div class="auth_header">
          <button class="login_btn" onclick="handleAuthRedirect('login')">
            ƒêƒÉng Nh·∫≠p
          </button>
          <button class="register_btn" onclick="handleAuthRedirect('register')">
            ƒêƒÉng K√Ω
          </button>
        </div>

        <!-- User dropdown menu (·∫©n ban ƒë·∫ßu) -->
        <div class="user_menu" id="user_menu" style="display: none">
          <div class="user_info_header">
            <div class="user_avatar_small" id="user_avatar_small">U</div>
            <div class="user_details">
              <span class="user_name" id="user_name_header">User</span>
              <span class="user_role">CodeQuest Member</span>
            </div>
            <button class="dropdown_toggle" id="dropdown_toggle">
              <i class="fas fa-chevron-down"></i>
            </button>
          </div>

          <div class="dropdown_menu" id="dropdown_menu">
            <a href="/profile" class="dropdown_item">
              <i class="fas fa-user-edit"></i>
              <span>C·∫≠p nh·∫≠t th√¥ng tin</span>
            </a>
            <button class="dropdown_item logout_btn" id="logout_btn">
              <i class="fas fa-sign-out-alt"></i>
              <span>ƒêƒÉng xu·∫•t</span>
            </button>
          </div>
        </div>
      </div>
    </header>

    <!-- Main -->
    <main class="site_main">
      <!-- Features Section -->
      <div class="title_features">
        <h1>NH·ªÆNG T√çNH NƒÇNG N·ªîI B·∫¨T</h1>
      </div>

      <section class="features_section">
        <div class="features_container">
          <div class="features_title">
            <h2>CodeQuest C√≥ G√¨ ƒê·∫∑c Bi·ªát?</h2>
            <p>
              Nh·ªØng ƒëi·ªÉm m·∫°nh gi√∫p CodeQuest tr·ªü th√†nh n·ªÅn t·∫£ng h·ªçc l·∫≠p tr√¨nh
              hi·ªáu qu·∫£ v√† th√∫ v·ªã h∆°n bao gi·ªù h·∫øt.
            </p>
          </div>

          <div class="features_gird">
            <div class="features_box">
              <span class="features_icon"><i class="fas fa-robot"></i></span>
              <h3>AI Mentor Th√¥ng Minh</h3>
              <p>Review code, g·ª£i √Ω s·ª≠a l·ªói v√† ƒë·ªÅ xu·∫•t l·ªô tr√¨nh c√° nh√¢n h√≥a.</p>
              <button class="card_cta">Xem demo</button>
            </div>

            <div class="features_box">
              <span class="features_icon"
                ><i class="far fa-calendar-alt"></i
              ></span>
              <h3>Th·ª≠ Th√°ch M·ªói Ng√†y</h3>
              <p>3 b√†i t·∫≠p m·ªói ng√†y, ph√¢n theo ƒë·ªô kh√≥ v√† theo d√µi streak.</p>
              <button class="card_cta">Nh·∫≠n th·ª≠ th√°ch</button>
            </div>

            <div class="features_box">
              <span class="features_icon"
                ><i class="fas fa-check-circle"></i
              ></span>
              <h3>T·ª± ƒê·ªông ƒê√°nh Gi√°</h3>
              <p>Ch·∫°y test, ƒë√°nh gi√° logic v√† ƒë∆∞a ra h∆∞·ªõng kh·∫Øc ph·ª•c c·ª• th·ªÉ.</p>
              <button class="card_cta">Xem c√°ch ho·∫°t ƒë·ªông</button>
            </div>

            <div class="features_box">
              <span class="features_icon"><i class="fas fa-medal"></i></span>
              <h3>XP, Level & Huy Hi·ªáu</h3>
              <p>T√≠ch lu·ªπ XP, l√™n c·∫•p v√† m·ªü kh√≥a huy hi·ªáu ƒë·∫∑c bi·ªát.</p>
              <button class="card_cta">Xem h·ªá th·ªëng</button>
            </div>

            <div class="features_box">
              <span class="features_icon"><i class="fas fa-trophy"></i></span>
              <h3>B·∫£ng X·∫øp H·∫°ng & Streak</h3>
              <p>
                So k√® v·ªõi c·ªông ƒë·ªìng, theo d√µi streak v√† thƒÉng h·∫°ng tr√™n BXH.
              </p>
              <button class="card_cta">Xem BXH</button>
            </div>
          </div>
        </div>
      </section>

      <!-- How It Works -->
      <section class="technologies_section">
        <div class="technologies_container">
          <div class="technologies_title">
            <h2>CodeQuest Ho·∫°t ƒê·ªông Th·∫ø N√†o?</h2>
            <p>
              Ch·ªâ v·ªõi 3 b∆∞·ªõc ƒë∆°n gi·∫£n, b·∫°n c√≥ th·ªÉ b·∫Øt ƒë·∫ßu h√†nh tr√¨nh l·∫≠p tr√¨nh
              c√πng AI Mentor.
            </p>
          </div>

          <div class="tech_grid">
            <div class="tech_item">
              <span class="tech_icon">1Ô∏è‚É£</span>
              <h3>Ch·ªçn Ng√¥n Ng·ªØ</h3>
              <p>Python, JavaScript, C++ ho·∫∑c ng√¥n ng·ªØ b·∫°n y√™u th√≠ch.</p>
            </div>
            <div class="tech_item">
              <span class="tech_icon">2Ô∏è‚É£</span>
              <h3>Nh·∫≠n Th·ª≠ Th√°ch</h3>
              <p>M·ªói ng√†y 3 b√†i t·∫≠p, ph√π h·ª£p tr√¨nh ƒë·ªô v√† m·ª•c ti√™u h·ªçc.</p>
            </div>
            <div class="tech_item">
              <span class="tech_icon">3Ô∏è‚É£</span>
              <h3>N·ªôp & Nh·∫≠n Feedback</h3>
              <p>
                H·ªá th·ªëng t·ª± ch·∫•m ƒëi·ªÉm, ph√¢n t√≠ch v√† ƒë∆∞a ra nh·∫≠n x√©t gi√∫p b·∫°n
                ti·∫øn b·ªô nhanh h∆°n.
              </p>
            </div>
          </div>
        </div>
      </section>
      <!-- Learning Path Section -->
      <section class="learning_path_section">
        <div class="learning_path_container">
          <div class="section_title">
            <h2>L·ªô Tr√¨nh H·ªçc T·∫≠p C√° Nh√¢n H√≥a</h2>
            <p>AI ph√¢n t√≠ch nƒÉng l·ª±c v√† ƒë·ªÅ xu·∫•t l·ªô tr√¨nh ph√π h·ª£p v·ªõi b·∫°n</p>
          </div>

          <div class="path_grid">
            <div class="path_card">
              <div class="path_header">
                <span class="path_icon">üéØ</span>
                <h3>Beginner</h3>
              </div>
              <ul class="path_features">
                <li>‚úì C√∫ ph√°p c∆° b·∫£n</li>
                <li>‚úì Bi·∫øn v√† ki·ªÉu d·ªØ li·ªáu</li>
                <li>‚úì V√≤ng l·∫∑p & ƒëi·ªÅu ki·ªán</li>
                <li>‚úì 50+ b√†i t·∫≠p th·ª±c h√†nh</li>
              </ul>
              <div class="path_progress">
                <div class="progress_bar">
                  <div class="progress_fill" style="width: 75%"></div>
                </div>
                <span class="progress_text">75% ho√†n th√†nh</span>
              </div>
            </div>

            <div class="path_card path_active">
              <div class="path_header">
                <span class="path_icon">üöÄ</span>
                <h3>Intermediate</h3>
              </div>
              <ul class="path_features">
                <li>‚úì C·∫•u tr√∫c d·ªØ li·ªáu</li>
                <li>‚úì Thu·∫≠t to√°n c∆° b·∫£n</li>
                <li>‚úì OOP & Design Patterns</li>
                <li>‚úì 100+ b√†i t·∫≠p n√¢ng cao</li>
              </ul>
              <div class="path_progress">
                <div class="progress_bar">
                  <div class="progress_fill" style="width: 45%"></div>
                </div>
                <span class="progress_text">45% ho√†n th√†nh</span>
              </div>
            </div>

            <div class="path_card">
              <div class="path_header">
                <span class="path_icon">‚ö°</span>
                <h3>Advanced</h3>
              </div>
              <ul class="path_features">
                <li>‚úì Thu·∫≠t to√°n n√¢ng cao</li>
                <li>‚úì System Design</li>
                <li>‚úì Performance tuning</li>
                <li>‚úì Interview challenges</li>
              </ul>
              <div class="path_progress">
                <div class="progress_bar">
                  <div class="progress_fill" style="width: 0%"></div>
                </div>
                <span class="progress_text">Ch∆∞a b·∫Øt ƒë·∫ßu</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Testimonials Section -->
      <section class="testimonials_section">
        <div class="testimonials_container">
          <div class="section_title">
            <h2>Ng∆∞·ªùi H·ªçc N√≥i G√¨ V·ªÅ CodeQuest?</h2>
            <p>H√†ng ngh√¨n ng∆∞·ªùi ƒë√£ thay ƒë·ªïi s·ª± nghi·ªáp nh·ªù CodeQuest</p>
          </div>

          <div class="testimonials_grid">
            <div class="testimonial_card">
              <div class="testimonial_rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
              <p class="testimonial_text">
                "AI Mentor gi√∫p m√¨nh ph√°t hi·ªán l·ªói logic r·∫•t nhanh. M√¨nh ƒë√£ t·ª´
                newbie l√™n intermediate ch·ªâ trong 3 th√°ng!"
              </p>
              <div class="testimonial_author">
                <div class="author_avatar">üë®‚Äçüíª</div>
                <div class="author_info">
                  <strong>Minh Tu·∫•n</strong>
                  <span>Frontend Developer</span>
                </div>
              </div>
            </div>

            <div class="testimonial_card">
              <div class="testimonial_rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
              <p class="testimonial_text">
                "H·ªá th·ªëng gamification l√†m vi·ªác h·ªçc tr·ªü n√™n th√∫ v·ªã. M·ªói ng√†y ƒë·ªÅu
                mu·ªën gi·ªØ streak v√† leo rank!"
              </p>
              <div class="testimonial_author">
                <div class="author_avatar">üë©‚Äçüíª</div>
                <div class="author_info">
                  <strong>Thu H√†</strong>
                  <span>Data Analyst</span>
                </div>
              </div>
            </div>

            <div class="testimonial_card">
              <div class="testimonial_rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
              <p class="testimonial_text">
                "B√†i t·∫≠p ƒëa d·∫°ng, ph√π h·ª£p m·ªçi tr√¨nh ƒë·ªô. Feedback chi ti·∫øt gi√∫p
                m√¨nh hi·ªÉu s√¢u h∆°n v·ªÅ code c·ªßa m√¨nh."
              </p>
              <div class="testimonial_author">
                <div class="author_avatar">üë®‚Äçüíª</div>
                <div class="author_info">
                  <strong>ƒê·ª©c Anh</strong>
                  <span>Backend Developer</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
    <!-- Footer Section -->
    <footer class="site-footer">
      <div class="footer-container">
        <!-- Th√¥ng tin li√™n h·ªá -->
        <div class="footer-contact">
          <p><strong>CodeQuest</strong></p>
          <p>Email: support@codequest.com</p>
          <p>Hotline: +84 123 456 789</p>
          <div class="footer-socials">
            <a href="#"
              ><i
                class="fab fa-facebook"
                style="font-size: 20px; color: #4267b2"
              ></i
            ></a>
            <a href="#"
              ><i class="fab fa-github" style="font-size: 20px; color: #333"></i
            ></a>
            <a href="#"
              ><i
                class="fab fa-twitter"
                style="font-size: 20px; color: #1da1f2"
              ></i
            ></a>
          </div>
        </div>

        <!-- Li√™n k·∫øt nhanh -->
        <div class="footer-links">
          <div class="footer-column">
            <h4>S·∫£n ph·∫©m</h4>
            <ul>
              <li><a href="home.html">Trang Ch·ªß</a></li>
              <li><a href="about.html">Gi·ªõi Thi·ªáu</a></li>
              <li><a href="features.html">ƒê·∫∑c Tr∆∞ng</a></li>
              <li><a href="contact.html">Li√™n H·ªá</a></li>
            </ul>
          </div>

          <div class="footer-column">
            <h4>C√¥ng ty</h4>
            <ul>
              <li><a href="about.html">V·ªÅ ch√∫ng t√¥i</a></li>
              <li><a href="careers.html">C∆° h·ªôi ngh·ªÅ nghi·ªáp</a></li>
              <li><a href="clients.html">Kh√°ch h√†ng</a></li>
            </ul>
          </div>
          <div class="footer-column">
            <h4>Ph√°p l√Ω</h4>
            <ul>
              <li><a href="/legal">Ph√°p l√Ω</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>

    <script>
      // X·ª≠ l√Ω chuy·ªÉn h∆∞·ªõng auth v·ªõi ki·ªÉm tra session
      async function handleAuthRedirect(tab) {
        try {
          const response = await fetch("/api/auth/check-session");
          const data = await response.json();

          if (data.success && data.authenticated) {
            // ƒê√£ ƒëƒÉng nh·∫≠p, chuy·ªÉn th·∫≥ng ƒë·∫øn dashboard
            window.location.href = "/dashboard";
          } else {
            // Ch∆∞a ƒëƒÉng nh·∫≠p, chuy·ªÉn ƒë·∫øn trang auth v·ªõi tab ƒë∆∞·ª£c ch·ªâ ƒë·ªãnh
            window.location.href = `/auth?tab=${tab}`;
          }
        } catch (error) {
          console.error("Error checking session:", error);
          // N·∫øu c√≥ l·ªói, m·∫∑c ƒë·ªãnh chuy·ªÉn ƒë·∫øn auth
          window.location.href = `/auth?tab=${tab}`;
        }
      }

      // Ki·ªÉm tra session v√† c·∫≠p nh·∫≠t header
      async function checkSessionAndUpdateHeader() {
        try {
          const response = await fetch("/api/auth/check-session");
          const data = await response.json();

          if (data.success && data.authenticated) {
            // User ƒë√£ ƒëƒÉng nh·∫≠p, hi·ªÉn th·ªã dropdown menu
            document.querySelector(".auth_header").style.display = "none";
            document.getElementById("user_menu").style.display = "flex";

            // C·∫≠p nh·∫≠t th√¥ng tin user
            document.getElementById("user_name_header").textContent =
              data.user.full_name || "User";
            const avatar = document.getElementById("user_avatar_small");
            avatar.textContent = data.user.full_name
              ? data.user.full_name.charAt(0).toUpperCase()
              : "U";

            setupDropdownEvents();
          } else {
            // User ch∆∞a ƒëƒÉng nh·∫≠p, hi·ªÉn th·ªã login/register buttons
            document.querySelector(".auth_header").style.display = "flex";
            document.getElementById("user_menu").style.display = "none";
          }
        } catch (error) {
          console.error("Error checking session:", error);
          // M·∫∑c ƒë·ªãnh hi·ªÉn th·ªã login/register
          document.querySelector(".auth_header").style.display = "flex";
          document.getElementById("user_menu").style.display = "none";
        }
      }

      function setupDropdownEvents() {
        const dropdownToggle = document.getElementById("dropdown_toggle");
        const dropdownMenu = document.getElementById("dropdown_menu");
        const logoutBtn = document.getElementById("logout_btn");

        // Toggle dropdown
        dropdownToggle.addEventListener("click", function (e) {
          e.stopPropagation();
          dropdownMenu.classList.toggle("show");
          dropdownToggle.classList.toggle("active");
        });

        // ƒê√≥ng dropdown khi click ra ngo√†i
        document.addEventListener("click", function () {
          dropdownMenu.classList.remove("show");
          dropdownToggle.classList.remove("active");
        });

        // X·ª≠ l√Ω logout
        logoutBtn.addEventListener("click", async function () {
          try {
            const response = await fetch("/api/auth/logout", {
              method: "POST",
            });

            if (response.ok) {
              window.location.href = "/home";
            }
          } catch (error) {
            console.error("Logout error:", error);
          }
        });
      }

      // Set active navigation button
      function setActiveNavButton() {
        const currentPage = window.location.pathname;
        const navButtons = document.querySelectorAll(".nav_btn");

        navButtons.forEach((btn) => {
          btn.classList.remove("active");

          // Check which page we're on and set active class
          if (
            currentPage.includes("/home") &&
            btn.textContent.trim() === "Trang Ch·ªß"
          ) {
            btn.classList.add("active");
          } else if (
            currentPage.includes("/about") &&
            btn.textContent.trim() === "Gi·ªõi Thi·ªáu"
          ) {
            btn.classList.add("active");
          } else if (
            currentPage.includes("/features") &&
            btn.textContent.trim() === "ƒê·∫∑c Tr∆∞ng"
          ) {
            btn.classList.add("active");
          } else if (
            currentPage.includes("/contact") &&
            btn.textContent.trim() === "Li√™n H·ªá"
          ) {
            btn.classList.add("active");
          }
        });
      }

      // Ch·∫°y khi trang load
      document.addEventListener("DOMContentLoaded", function () {
        checkSessionAndUpdateHeader();
        setActiveNavButton();
      });
    </script>
  </body>
</html>
